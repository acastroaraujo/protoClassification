---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# protoClassification

<!-- badges: start -->
[![R-CMD-check](https://github.com/acastroaraujo/protoClassification/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/acastroaraujo/protoClassification/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

You can install the development version of protoClassification from [GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("acastroaraujo/protoClassification")
```

Overview:

```{r overview, echo=FALSE}
knitr::include_graphics("overview.png")
```


```{r example, message=FALSE, warning=FALSE, eval=FALSE}
library(tidyverse)
library(protoClassification)

K <- 5
nms <- paste0("k", 1:K)
rho <- rlkjcorr(1, K, eta = 1)
marginals <- rbeta(K, 2, 3)

rownames(rho) <- nms
colnames(rho) <- nms
names(marginals) <- nms

out <- make_binary_data(marginals, rho)
out[1:10, ]

w <- runif(K)
w <- w / sum(w)

P <- rep(1, K)

d <- calculateDS(out, w, P, g = 10) |>
  rename_all(\(x) paste0(x, 1)) |>
  bind_cols(as.data.frame(out))

d |>
  ggplot(aes(distance1, similarity1)) +
  geom_point(alpha = 1 / 4, position = position_jitter(width = 0))

P2 <- rep(0, K)
d2 <- calculateDS(out, w, P2, 12) |>
  rename_all(\(x) paste0(x, 2))

d <- bind_cols(d, d2)

d <- d |>
  mutate(C1 = similarity1 / (similarity1 + similarity2)) |>
  mutate(C2 = similarity2 / (similarity1 + similarity2))

d |>
  ggplot(aes(similarity1, C1)) +
  geom_point()
scale_x_log10()

d |>
  ggplot(aes(distance1, C1)) +
  geom_point()

d |>
  ggplot(aes(similarity2, C2)) +
  geom_point() +
  scale_x_log10()

mean(round(d$C1))
mean(round(d$C2))
```


